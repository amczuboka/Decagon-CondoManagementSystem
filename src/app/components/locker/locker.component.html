<table summary="Lockers" mat-table [dataSource]="fakeLockers" class="mat-elevation-z8">
  <!-- Define the columns -->
  <ng-container matColumnDef="Locker">
    <th mat-header-cell *matHeaderCellDef>Locker</th>
    <td mat-cell *matCellDef="let locker">#{{ locker.Number }}</td>
  </ng-container>

  <ng-container *ngIf="authority == 'Company'" matColumnDef="OccupantID">
    <th mat-header-cell *matHeaderCellDef>Occupant ID</th>
    <td mat-cell *matCellDef="let locker">
      <div class="user">
        <img [src]="users[locker.OccupantID].ProfilePicture" alt="Avatar" />
        {{ users[locker.OccupantID].FirstName }}
        {{ users[locker.OccupantID].LastName }}
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="Size">
    <th mat-header-cell *matHeaderCellDef>Size</th>
    <td mat-cell *matCellDef="let locker">{{ locker.Size }}</td>
  </ng-container>

  <ng-container matColumnDef="Price per month">
    <th mat-header-cell *matHeaderCellDef>Price per month</th>
    <td mat-cell *matCellDef="let locker">${{ locker.Fee }}</td>
  </ng-container>

  <ng-container matColumnDef="Status">
    <th mat-header-cell *matHeaderCellDef>Status</th>
    <td mat-cell *matCellDef="let locker">
        <ng-container *ngIf="authority == 'Company'">
            <div
              class="status-indicator"
              [ngClass]="{
                available: locker.Status === 'Available',
                unavailable: locker.Status === 'Unavailable'
              }"
            >
              {{ locker.Status }}
            </div>
          </ng-container>
          <ng-container *ngIf="authority == 'Public'">
            <div class="request">Request for Rent</div>
          </ng-container>
    </td>
  </ng-container>

  <!-- Assign the column definitions to the table -->
  <tr
    mat-header-row
    *matHeaderRowDef="
      authority == 'Company'
        ? ['Locker', 'OccupantID', 'Size', 'Price per month', 'Status']
        : ['Locker', 'Size', 'Price per month', 'Status']
    "
  ></tr>
  <tr
    mat-row
    *matRowDef="
      let row;
      columns: authority == 'Company'
        ? ['Locker', 'OccupantID', 'Size', 'Price per month', 'Status']
        : ['Locker', 'Size', 'Price per month', 'Status'];
      let i = index
    "
    [class.even-row]="i % 2 === 0"
  ></tr>
</table>
